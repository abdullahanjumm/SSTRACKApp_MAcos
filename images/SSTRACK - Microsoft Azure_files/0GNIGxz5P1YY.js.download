define("FxInternal/Controls/TriStateCheckBox",["require","exports","FxInternal/Controls/Base/FormsBase"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=void 0;var t=function(e){function r(r,n){var t=e.call(this,r,n)||this;return n=n||{},t.controlType=22,t.canUserSetIndeterminate=ko.observable(!1!==n.userCanSetIndeterminate),t.inlineLabel=n.labelOnRight||!1,t.isAMD=!0,t}return __extends(r,e),r}(n.ViewModel);r.ViewModel=t})),
define("Fx/Controls/TriStateCheckBox",["require","exports","FxInternal/Controls/TriStateCheckBox"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=void 0,r.create=function(e,r){var t;return ko.ignoreDependencies((function(){t=new n.ViewModel(e,r)})),t}})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Util",["require","exports"],(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArray=r.convertToString=r.computedObject=r.pureComputed=r.computed=r.reactor=r.subscribeAndRun=r.subscribe=r.lazy=r.internal=r.defProps=r.extend=r.defLocalProps=void 0;var n=Object.defineProperty,t=Object.keys,o=Array.prototype.slice,i={enumerable:!1};function a(e,r){if(r){var n,o=t(r),i=o.length,a=void 0;for(a=0;a<i;a++)e[n=o[a]]=r[n]}return e}function l(e,r){var n,t,o=e.length;for(t=0;t<o;t++){var i=(n=e[t]).subscription;i&&(!r||"sweep"===r&&n.disposing?(n.subscription=null,n.disposing=!1,i.dispose()):"mark"===r&&(n.disposing=!0))}}function s(){var e,r,n,t=arguments.length;return t>2&&(e=arguments[0],r=o.call(arguments,1,t-1),n=arguments[t-1]),u(e,r,n)}function u(e,r,n){var t=ko.observable();if(e&&!e.isDisposed()){var o=r.length,i=new Array(o),a=new Array(o),s=function(e,r){return e&&e.peek?function(){return r.subscription||(r.subscription=e.subscribe((function(){if(!r.disposing){l(a,"mark");var e=t.peek(),o=n.apply(void 0,i);e!==o&&t(o),l(a,"sweep")}}))),r.disposing=!1,e.peek()}:function(){return e}},u=void 0;for(u=0;u<o;u++){var d=a[u]={subscription:null,disposing:!1};i[u]=s(r[u],d)}e.registerForDispose((function(){return l(a)})),t(n.apply(void 0,i))}return t}r.defLocalProps=function(e,r){var o,a,l=t(r),s=l.length;for(o=0;o<s;o++)a=l[o],i.value=r[a],n(e,a,i)},r.extend=a,r.defProps=a,r.internal=function(e){return e&&e._msPortalFxInternal},r.lazy=function(e){var r;return function(){return r||(r=e()),r}},r.subscribe=function(){var e,r,n,t,o=arguments.length-2,i=function(t,o){ko.isObservable(t)?(n[o]=t.peek(),t.subscribe(e,(function(e){n[o]=e,r.apply(void 0,n)}))):n[o]=t};if(o)for(e=arguments[0],r=arguments[o+1],n=new Array(o),t=0;t<o;t++)i(arguments[t+1],t)},r.subscribeAndRun=function(){var e,r,n,t,o=arguments.length-2,i=function(t,o){t&&t.peek?(n[o]=t.peek(),t.subscribe(e,(function(e){n[o]=e,r.apply(void 0,n)}))):n[o]=t};if(o)for(e=arguments[0],r=arguments[o+1],n=new Array(o),t=0;t<o;t++)i(arguments[t+1],t);r.apply(void 0,n)},r.reactor=function(){var e=arguments[0];if(e&&!e.isDisposed()){var r=arguments.length-2,n=new Array(r),t=new Array(r),o=arguments[r+1],i=function(e,r){return e&&e.peek?function(){return r.subscription||(r.subscription=e.subscribe((function(){r.disposing||(l(t,"mark"),o.apply(void 0,n),l(t,"sweep"))}))),r.disposing=!1,e.peek()}:function(){return e}},a=void 0;for(a=0;a<r;a++){var s=t[a]={subscription:null,disposing:!1};n[a]=i(arguments[a+1],s)}e.registerForDispose((function(){return l(t)})),o.apply(void 0,n)}},r.computed=s,r.pureComputed=function(){var e,r=o.call(arguments);return ko.pureComputed((function(){return e||(e=s.apply(null,r)),e()}))},r.computedObject=function(e,r){var n,o,i,a=t(r),l=a.length,s=[],d=!1;for(o=0;o<l;o++)i=r[a[o]],ko.isObservable(i)&&(d=!0),s.push(i);var c=function(e){var r={};for(o=0;o<l;o++)r[a[o]]=e[o];return r};return n=d?u(e,s,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return c(e.map((function(e){return e()})))})):c(s),n},r.convertToString=function(e){return null==e?"":"string"==typeof e?e:""+e},r.isArray=Array.isArray})),
define("FxInternal/Utils/KnockoutArrayUtils",["require","exports"],(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mapArrayEdits=r.EditStatusRetained=r.EditStatusDeleted=r.EditStatusAdded=r.observableArrayMap=void 0,r.observableArrayMap=function(e,r,n){var t=new Map,o=ko.observableArray();return o.get=function(e){return t.get(e)},o.subscribeArrayBulkChanges(e,(function(e,n){n.forEach((function(e){t.delete(r(e))})),e.forEach((function(e){t.set(r(e),e)}))})),(n=ko.unwrap(n))&&o(n.slice()),o},r.EditStatusAdded="added",r.EditStatusDeleted="deleted",r.EditStatusRetained="retained",r.mapArrayEdits=function(e,n,t){return e.map((function(e){var o=MsPortalFx.clone(e);return e.status===r.EditStatusAdded?MsPortalFx.isUndefined(e.moved)?o.value=t(e.value):o.value=n[e.moved]:o.value=n[e.index],o}))}})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Base",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=r.Plugin=r.isRow=r.isRowGroup=r.isGroupNode=r.isDataNode=r.isParentNode=void 0;var o=window,i=MsPortalFx.Resources.Strings.CoreGrid,a=Object.keys,l=FxImpl.features.isNativePerf&&o.performance;r.isParentNode=function(e){return!!e.children||!!e.getChildren},r.isDataNode=function(e){return!!e.item&&!e.group},r.isGroupNode=function(e){return!!e.group},r.isRowGroup=function(e){return!!e.group&&!e.item},r.isRow=function(e){return!e.group&&!!e.item};var s=function(e,r,n,t){this._lifetime=e,this._grid=r,this._gridInternal=n,this._options=t};r.Plugin=s;var u=function(e){function r(r,o){var l,s,u=e.call(this,r)||this;u._columnId=0,u._options=o,u.cssClass=MsPortalFx.initObservable(o.cssClass,""),u.disabled=MsPortalFx.initObservable(o.disabled,!1),u.visible=MsPortalFx.initObservable(o.visible,!0),u.ariaLabel=MsPortalFx.initObservable(o.ariaLabel),u.header={},u._loadingTasks=[],u.loading=ko.observable(!1),u.loadingMessage=ko.observable(""),u.noData=ko.observable(!0),u.noDataMessage=MsPortalFx.initObservable(o.noDataMessage,i.noData);var d=u._columnDefinitions=MsPortalFx.initObservableArray(o.columns),c=n.observableArrayMap(r,(function(e){return e.id})),f=u.columns=c;t.extend(f,{add:function(e,r){var n=[MsPortalFx.isNullOrUndefined(r)?(d.peek()||[]).length:r,0];d.splice.apply(d,n.concat(e))},remove:function(e){return d.remove((function(r){return e.includes(r.id)}))},removeAll:function(){return d.removeAll()}});var p=u._nodes=ko.observableArray(),v=u._nodesById=n.observableArrayMap(r,(function(e){return e.id}));p.mapInto(r,(function(e,r){return r}),v);var g=u._nodesByItem=n.observableArrayMap(r,(function(e){return e.item}));p.mapInto(r,(function(e,r){return r}),g);var h=u._nodesByGroup=n.observableArrayMap(r,(function(e){return e.group}));p.mapInto(r,(function(e,r){return r}),h);var m=0,w=function(e){var r={id:MsPortalFx.isNullOrUndefined(e.id)?""+m++:t.convertToString(e.id),isGroup:!!e.group,item:e.item,group:e.group,source:e,children:e.children?e.children.map(w):null};return!r.children&&r.source.getChildren&&(r.getChildren=function(){return Q(r.source.getChildren(r.source)).then((function(e){r.children=e?e.map(w):null,r.getChildren=null}))}),r},_=ko.observable(null),x={},G={},b=u._msPortalFxInternal={trigger:G,_nodes:p,_nodesById:v,_nodesByItem:g,_createRow:function(e,r,n){var t=o.row||{},i={_lifetime:e,_node:r},a={_msPortalFxInternal:i};return u._createRow(e,a,i,t,r,n),u._initRow(e,a,i,t),a},_createRowGroup:function(e,r,n){var t=o.rowGroup||{},i={_lifetime:e,_node:r},a={_msPortalFxInternal:i};return u._createRowGroup(e,a,i,t,r,n),u._initRowGroup(e,a,i,t),a},_createCell:function(e,r,n,t){var o={_lifetime:e},i={_msPortalFxInternal:o};return u._createCell(e,i,o,r,n,t),u._initCell(e,i,o,r,n,t),i},_createInternalNode:w,_updateRows:function(){return u._updateRows()},headerHeight:MsPortalFx.initValue(o.header&&o.header.height,36),renderMode:0,rowHeight:MsPortalFx.initValue(null===(l=o.row)||void 0===l?void 0:l.height,32),rowIsExpandable:MsPortalFx.initValue(null===(s=o.row)||void 0===s?void 0:s.expandable,!1),hscroll:!1,vscroll:ko.observable(!1),ariaReadOnly:!0,announcement:ko.observable(""),flushCallback:_,showLoadingUI:ko.observable(!0)};return t.defLocalProps(b,{on:function(e){var r,n=a(e),t=n.length;for(r=0;r<t;r++){var o=n[r],i=x[o];i||(i=[],x[o]=i),i.push(e[o])}},addEventTriggers:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){G[e]=function(){var r=x[e];if(r){var n=void 0,t=r.length;for(n=0;n<t;n++)r[n].apply(null,arguments)}}}))},flushChanges:function(){var e=_.peek();return e?e():Q.reject(new MsPortalFx.Errors.CanceledError("flush not possible"))}}),b.addEventTriggers("extendGrid","initGrid","extendHeader","initHeader","extendColumnHeader","initColumnHeader","extendColumn","initColumn","extendRow","initRow","extendRowGroup","initRowGroup","extendCell","initCell","onSizeChanged","onPageChanged","onHeightChanged","onWidthChanged","onViewportChanged","onReset"),u}return __extends(r,e),r.prototype._extendGrid=function(e,r,n,t){n.trigger.extendGrid(e,r,n,t)},r.prototype._initGrid=function(e,r,n,o){var i=this;this._columnDefinitions.mapInto(e,(function(e,r){var n=r.header,t=n;n&&!ko.isObservable(n)&&"number"!=typeof n.controlType&&"string"!=typeof n&&"string"!=typeof n.htmlTemplate||(t={content:n});var o={},a={_msPortalFxInternal:o};i._createColumnHeader(e,a,o,t),i._initColumnHeader(e,a,o,t);var l={},s={_msPortalFxInternal:l};return i._createColumn(e,s,l,r,a),i._initColumn(e,s,l,r,a),s}),this.columns),l&&t.subscribe(e,r.loading,(function(e){e?l.mark("GridLoadingStart"):l.mark("GridLoadingEnd")})),n.on({onSizeChanged:function(e,t,i,a,l,s){if(e!==a){n.trigger.onWidthChanged(e,a);var u=o.onWidthChanged;u&&u(e,a,r)}if(t!==l){n.trigger.onHeightChanged(t,l);var d=o.onHeightChanged;d&&d(t,l,r)}if(i!==s){n.trigger.onViewportChanged(i,s);var c=o.onViewportChanged;c&&c(i,s)}},onPageChanged:function(e,n){var t=o.onPageChanged;t&&t(e,n,r)}}),n.trigger.initGrid(e,r,n,o)},r.prototype._extendHeader=function(e,r,n){r.visible=MsPortalFx.initObservable(n.visible,!0),this._msPortalFxInternal.trigger.extendHeader(e,r,n)},r.prototype._initHeader=function(e,r,n){this._msPortalFxInternal.trigger.initHeader(e,r,n)},r.prototype._createColumnHeader=function(e,r,n,o){t.defProps(r,{ariaLabel:MsPortalFx.initObservable(o.ariaLabel),content:MsPortalFx.initObservable(o.content)}),t.defProps(n,{bold:MsPortalFx.initValue(o.bold,true),upperCase:MsPortalFx.initValue(o.upperCase,false)}),this._msPortalFxInternal.trigger.extendColumnHeader(e,r,n,o)},r.prototype._initColumnHeader=function(e,r,n,t){this._msPortalFxInternal.trigger.initColumnHeader(e,r,n,t)},r.prototype._createColumn=function(e,r,n,o,i){n._definition=o,n._lifetime=e,n.minWidth=MsPortalFx.initObservable(o.minWidth,140),n.ariaReadOnly=!0,t.defProps(r,{id:o.id||"column_"+this._columnId++,header:i,width:MsPortalFx.initObservable(o.width),visible:MsPortalFx.initObservable(o.visible,!0)}),o.cell&&(r.cellFormatter=this._createFormatter(o.type,o)),this._msPortalFxInternal.trigger.extendColumn(e,r,n,o)},r.prototype._initColumn=function(e,r,n,t,o){this._msPortalFxInternal.trigger.initColumn(e,r,n,t)},r.prototype._createCell=function(e,r,n,o,i,a){t.defProps(r,{column:a,content:ko.observable(ko.unwrap(i.content)),ariaLabel:ko.observable(ko.unwrap(i.ariaLabel))}),this._msPortalFxInternal.trigger.extendCell(e,r,n,o)},r.prototype._initCell=function(e,r,n,o,i,a){t.reactor(e,i.content,(function(e){r.content(e())})),t.reactor(e,i.ariaLabel,(function(e){r.ariaLabel(e())})),this._msPortalFxInternal.trigger.initCell(e,r,n,o)},r.prototype._updateRows=function(){},r.prototype._createRow=function(e,r,o,i,a,l){var s=a.id,u=a.item,d=i.ariaLabel&&i.ariaLabel(u,e),c=i.disabled&&i.disabled(u,e);t.defLocalProps(r,{item:u}),t.defProps(o,{excluded:ko.observable(!1),isGroup:!1}),t.defProps(r,{id:s,ariaLabel:MsPortalFx.initObservable(d),disabled:MsPortalFx.initObservable(c,!1)}),r.cells=n.observableArrayMap(e,(function(e){return e.column&&e.column.id||null})),this._msPortalFxInternal.trigger.extendRow(e,r,o,i,l)},r.prototype._initRow=function(e,r,n,o){var i=this;this.columns.mapInto(e,(function(e,n){var o,a,l=e,s=t.internal(n);if(s._definition.defineCell){var u=s._definition.defineCell(l,r.item,r);a=u,u&&"object"==typeof u&&u.hasOwnProperty("content")&&"number"!=typeof u.controlType||(a={content:u})}else if(n.cellFormatter){o={},a={content:n.cellFormatter.format(l,r,i)}}return i._msPortalFxInternal._createCell(l,o,a,n)}),r.cells),this._msPortalFxInternal.trigger.initRow(e,r,n,o)},r.prototype._createRowGroup=function(e,r,n,o,i,a){var l=i.id,s=i.group,u=o.ariaLabel&&o.ariaLabel(s,e);t.defLocalProps(r,{group:s}),t.defProps(n,{excluded:ko.observable(!1),isGroup:!0}),t.defProps(r,{id:l,ariaLabel:MsPortalFx.initObservable(u)}),r.cells=ko.observableArray(),r.disabled=ko.observable(!1),this._msPortalFxInternal.trigger.extendRowGroup(e,r,n,o,a)},r.prototype._initRowGroup=function(e,r,n,t){var o=e.createChildLifetime(),i={content:t&&t.content&&t.content(r.group,e)},a=this._msPortalFxInternal._createCell(o,{},i,null);r.cells([a]),this._msPortalFxInternal.trigger.initRowGroup(e,r,n,t)},r.prototype._processLoadingTask=function(){var e=this,r=this._msPortalFxInternal,n=this._loadingTasks.shift();if(n){var t=n.messageOptions,o=n.uiShown,i=n.completion;this.loading(!0);var a=t.message||"";this.loadingMessage(a),a&&r.announcement(a),r.flushChanges().then((function(){o.resolve(e.loading()&&r.showLoadingUI())}),(function(){o.resolve(!1)})),i.finally((function(){if(!e._processLoadingTask()){var n=t.completedMessage||"",o=void 0,i=r.totalRowCount();(o=i>0?(t.completedDataMessage||"").format({count:i}):t.completedNoDataMessage||"").length&&(n=n.length?n+"\n"+o:o),e._msPortalFxInternal.announcement(n)}})).catch((function(e){}))}else this.loading(!1),this.loadingMessage("");return!!n},r.prototype.displayLoadingMessage=function(e,r){var n=r?"string"==typeof r?{message:r}:r:{},t=Q.defer();return this._loadingTasks.push({completion:Q(e),uiShown:t,messageOptions:n}),this.loading()||this._processLoadingTask(),t.promise},r}(MsPortalFx.ViewModels.Controls.Base.ViewModel);r.ViewModel=u})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=function(e){function r(r,n,o,i){var a,l,s,u,d,c=e.call(this,r,n,o,i)||this,f=i.activation||{},p=ko.observable(null),v=ko.observable(null),g=MsPortalFx.initValue(f.hideSelectionDuringActivation,!1);function h(e,r){var n=t.internal(e),o=t.internal(r),i=!1;return a!==n&&(a&&a.activated(!1),n?(n.activated(!0),s=e.column.id):s=null,a=n,v(s),i=!0),l!==o&&(l&&l.activated(!1),o?(o.activated(!0),u=r.id,d=r.item):(u=null,d=null),l=o,p(d),i=!0),i}var m=function(e,r){var n=h(e,r);return n&&g&&o.saveSelection&&o.saveSelection(r,!1),n},w=function(){var e=h();return e&&g&&o.restoreSelection&&o.restoreSelection(),e};return o.on({extendGrid:function(e,r,n,o){t.defProps(n,{activate:m,deactivate:w}),r.activation={},t.defLocalProps(r.activation,{activatedItem:p,activatedColumnId:v})},extendRow:function(e,r,n,o){var i=ko.observable(!1);r.activated=i,t.defLocalProps(n,{activated:i})},initRow:function(e,r,n,t){if(null!=u&&u===r.id||null!=d&&d===r.item){r.activated(!0);var o=r.cells.get(s);o&&o.activated(!0)}},extendCell:function(e,r,n,o){var i=ko.observable(!1);r.activated=i,t.defLocalProps(n,{activated:i})}}),c}return __extends(r,e),r}(n.Plugin);r.Plugin=o})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=MsPortalFx.Base.Diagnostics.createLog(e),i=function(e){function r(r,n,i,a,l){var s=e.call(this,r,n,i,a)||this,u=a.contextMenu;if(u){var d=MsPortalFx.wrap(!0),c=MsPortalFx.wrap([]),f=u.canShowMenu||l.canShowMenu||d,p=u.supplyMenuCommands||l.supplyMenuCommands||c,v=u.supplyMenuBulkCommands||l.supplyMenuBulkCommands||c,g=u.supplyButtonCommands||l.supplyButtonCommands||c,h=MsPortalFx.initObservable(u.visible,!0),m=r.createChildLifetime(),w=ko.observableArray(),_=MsPortalFx.initValue(u.maxButtonCommands,MsPortalFx.initValue(l.maxButtonCommands,1)),x=function(e){return t.internal(e).canShowMenu()},G=function(e){if(w.removeAll(),m.dispose(),m=r.createChildLifetime(),x(e)){var t=n.selection,i=t?t.selectedRows():[];if(!(i.length>1))return Q(p(m,e,n)).then((function(e){e&&MsPortalFx.find(e,(function(e){return 17===e.type}))&&o.error("List commands are not supported in supplyMenuCommands");var r=e.filter((function(e){return 17!==e.type}));w(r||[])}));if(i.includes(e)&&i.every(x))return Q(v(m,t,n)).then((function(e){e&&MsPortalFx.find(e,(function(e){return 17===e.type}))&&o.error("List commands are not supported in supplyMenuBulkCommands");var r=e.filter((function(e){return 17!==e.type}));w(r||[])}))}return Q()};i.on({extendGrid:function(e,r,n,t){r.contextMenu={maxButtonCommands:_,supplyMenuCommands:G,menuCommands:w,visible:h}},extendRow:function(e,r,n,t){n.commandButtons=ko.observable([]),n.canShowMenu=ko.observable(!1)},initRow:function(e,r,t,o){ko.reactor(e,(function(){t.canShowMenu(function(e){return f(e,n)}(r))})),MsPortalFx.tryImmediateResolve(function(e,r){return Q(g(e,r,n))}(e,r),(function(e){t.commandButtons(e||[])}))}})}return s}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var t=function(e){function r(r,n,t,o){return e.call(this,r,n,t,o)||this}return __extends(r,e),r}(n.Plugin);r.Plugin=t})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var i=function(e){function r(r,n,i,a){var l=e.call(this,r,n,i,a)||this,s=a.focus||{},u=ko.observable(null),d=ko.observable(null),c=ko.observable(null),f=ko.observable(null),p=i.visibleRows,v=t.observableArrayMap(r,(function(e){return e.id}));p.mapInto(r,(function(e,r){return r}),v);var g=function(e){var r=c(),n=e!==r;if(n){c(e);var t=e&&o.internal(e);t&&!t.isGroup?(u(e),d(null)):(d(e),u(null)),i.trigger.rowOrRowGroupChanged(e,r)}return n},h=function(e,r){var n=function(e){return!!e&&p().some((function(r){return r===e}))}(e);if(n&&(g(e)&&r)){var t=i.focusRowOrRowGroup();t&&t(e)}return n},m=function(e){var r=!!e;if(r){var n=o.internal(e);(r=!!n&&!n.isGroup)&&(r=h(e,!0))}return r},w=function(e){return h(e,!1)},_=function(){for(var e,r=c(),n=!1,t=p(),o=0;o<t.length;o++){var i=t[o];if(i===r)n=!0;else if(n){e=i;break}}return h(e,!0)},x=function(){for(var e,r=c(),n=p(),t=0;t<n.length;t++){var o=n[t];if(o===r)break;e=o}return h(e,!0)},G=function(){var e=p()[0];return h(e,!0)},b=function(){var e=p(),r=e[e.length-1];return h(r,!0)},C=function(){g(null)};return i.on({extendGrid:function(e,r,n,t){r.focus={currentRow:u,currentRowGroup:d,currentCell:f,moveToRow:m,moveDown:_,moveUp:x,moveFirst:G,moveLast:b},o.defProps(n,{currentRowOrRowGroup:c,focusRowOrRowGroup:ko.observable(),moveToFocusedRowOrRowGroup:w}),o.defLocalProps(n,{clearCurrentRowOrRowGroup:C})},initGrid:function(e,r,n,t){n.visibleRows.subscribeArrayBulkChanges(e,(function(e,r){var n=c();if(n&&r.includes(n)){var t=v.get(n.id);g(t||null)}}))},extendRow:function(e,r,n,t){o.defProps(r,{focused:ko.observable(!1)}),o.defProps(n,{tabbable:ko.observable(!1)})},extendRowGroup:function(e,r,n,t){o.defProps(r,{focused:ko.observable(!1)})},enterRow:function(e,r){var t=s.onEnterRow;if(t&&e){var i=o.internal(e);i.isGroup||i.excluded()||t(e,n)}w(e),f(r)},exitRow:function(e,r){var t=s.onExitRow;if(t&&e){var i=o.internal(e);i.isGroup||i.excluded()||t(e,n)}},enterCell:function(e,r){var t=s.onEnterCell;if(t&&e&&r){var i=o.internal(r);i.isGroup||i.excluded()||t(e,r,n)}f(e)},exitCell:function(e,r){var t=s.onExitCell;if(t&&e&&r){var i=o.internal(r);i.isGroup||i.excluded()||t(e,r,n)}},rowOrRowGroupChanged:function(e,r){e&&e.focused(!0),r&&r.focused(!1)},onReset:function(){g(null)}}),i.addEventTriggers("enterRow","exitRow","enterCell","exitCell","rowOrRowGroupChanged"),l}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n){"use strict";function t(e,r){return ko.isObservable(r)?n.computed(e,r,(function(e){return n.convertToString(e())})):n.convertToString(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.TagListFormatter=r.CustomLinkFormatter=r.ResourceLinkFormatter=r.BladeLinkFormatter=r.UriLinkFormatter=r.TemplateFormatter=r.TextFormatter=r.BaseFormatter=void 0;var o=function(){function e(e,r,n){this.formatterType=e,this._format=r,this.constantFormat=n}return e.prototype.format=function(e,r,t){var o=this._format(r.item,e,r,t);return n.computedObject(e,o)},e}();r.BaseFormatter=o;var i=function(e){function r(r){var n=r.cell||{};return e.call(this,"Text",(function(e,r,o,i){return{text:t(r,n.text&&n.text(e,r,o))}}),{})||this}return __extends(r,e),r}(o);r.TextFormatter=i;var a=function(e){function r(r){var n=this,t=r.cell||{};return(n=e.call(this,"Template",(function(e,r,n,o){return{viewModel:t.viewModel&&t.viewModel(e,r,n,o)}}),{})||this).template=t.template,n}return __extends(r,e),r}(o);r.TemplateFormatter=a;var l=function(e){function r(r){var n=this,o=r.cell||{};return(n=e.call(this,"UriLink",(function(e,r,n,i){var a=o.uriLink&&o.uriLink(e,r,n)||{},l=t(r,a.text);return __assign(__assign({},a),{text:l})}),{})||this).telemetryName=o.telemetryName,n}return __extends(r,e),r}(o);r.UriLinkFormatter=l;var s=function(e){function r(r){var n=this,o=r.cell||{};return(n=e.call(this,"BladeLink",(function(e,r,n,i){var a=o.bladeLink&&o.bladeLink(e,r,n)||{},l=t(r,a.text);return __assign(__assign({},a),{text:l})}),{})||this).telemetryName=o.telemetryName,n}return __extends(r,e),r}(o);r.BladeLinkFormatter=s;var u=function(e){function r(r){var n=this,o=r.cell||{};return(n=e.call(this,"ResourceLink",(function(e,r,n,i){var a=o.resourceLink&&o.resourceLink(e,r,n)||{},l=t(r,a.text);return __assign(__assign({},a),{text:l,canClick:MsPortalFx.initValue(a.canClick,!0)})}),{})||this).showIcon=!1!==o.showIcon,n.showPreview=!1!==o.showPreview,n.telemetryName=o.telemetryName,n.attachHoverCard=o.attachHoverCard,n.bladeManagement=o.bladeManagement,n.supplyInPageBladeParameters=o.supplyInPageBladeParameters&&function(e,r){return Q(o.supplyInPageBladeParameters(e,r.item,r))},n}return __extends(r,e),r}(o);r.ResourceLinkFormatter=u;var d=function(e){function r(r){var n=this,o=r.cell||{};return(n=e.call(this,"CustomLink",(function(e,r,n,i){var a=o.customLink&&o.customLink(e,r,n)||{},l=t(r,a.text);return __assign(__assign({},a),{text:l,canClick:MsPortalFx.initValue(a.canClick,!0)})}),{})||this).buttonRole=!!o.buttonRole,n.telemetryName=o.telemetryName,n.invokeClick=o.onClick&&function(e){o.onClick(e.row.item,e.row,e.element)},n}return __extends(r,e),r}(o);r.CustomLinkFormatter=d;var c=function(e){function r(r){var n=this,t=r.cell||{};return(n=e.call(this,"TagList",(function(e,r,n,o){return{tags:t.tags&&t.tags(e,r,n)}}),{})||this).invokeClick=t.onClick&&function(e,r){t.onClick(e.item,r)},n}return __extends(r,e),r}(o);r.TagListFormatter=c,r.create=function(e,r){switch(e){case"Text":return new i(r);case"Template":return new a(r);case"UriLink":return new l(r);case"BladeLink":return new s(r);case"ResourceLink":return new u(r);case"CustomLink":return new d(r);case"TagList":return new c(r)}}})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var t=function(e){function r(r,n,t,o){var i=e.call(this,r,n,t,o)||this;return i._isGrouped=ko.observable(!1),t.on({extendGrid:function(e,r,n,t){n.isGrouped=i._isGrouped}}),i}return __extends(r,e),r.prototype.enableGrouping=function(e){this._isGrouped(e)},r}(n.Plugin);r.Plugin=t})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";function o(e,r){e&&e.forEach((function(e){if(r(e)){var n=e.children;n&&o(n.peek(),r)}}))}function i(e,r){if(e&&e.length){var n=e.shift();return r(n).then((function(r){if(r){var t=n.children;t&&e.push.apply(e,t.peek()||[])}return r})).then((function(){return i(e,r)}))}return Q(!0)}Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var a=function(e){function r(r,a,l,s,u){var d=e.call(this,r,a,l,s)||this;d._hasHierarchicalColumn=ko.observable(!1),d._isHierarchical=ko.observable(!1);var c=MsPortalFx.initValue(s.hierarchy,{});if(c){var f=d._isHierarchical,p=d._hasHierarchicalColumn,v=function(e,r,o,i){var l=!!e;l&&((l=void 0===i||i===n.isRowGroup(e))&&(l=t.internal(e).expandable())&&(l=r!==e.expanded()));if(l&&o)if(n.isRow(e)){var s=r?c.canExpandRow:c.canCollapseRow;s&&(l=s(e,a))}else if(n.isRowGroup(e)){var u=r?c.canExpandRowGroup:c.canCollapseRowGroup;u&&(l=u(e,a))}return l},g=function(e,r,t,o,i){return ko.ignoreDependencies((function(){var l=v(e,r,t,i);return l?r?m(e,o).then((function(r){return r&&(n.isRow(e)&&c.onExpandRow?c.onExpandRow(e,a):n.isRowGroup(e)&&c.onExpandRowGroup&&c.onExpandRowGroup(e,a)),r})):h(e,o).then((function(r){return r&&(n.isRow(e)&&c.onCollapseRow?c.onCollapseRow(e,a):n.isRowGroup(e)&&c.onCollapseRowGroup&&c.onCollapseRowGroup(e,a)),r})):Q(l)}))},h=function(e,r){return e.expanded(!1),r&&l._updateRows(),Q(!0)},m=function(e,r){if(e.children.peek().length)e.expanded(!0),r&&l._updateRows();else{var n=t.internal(e),o=n._node;if((o.children||o.getChildren)&&!o.children&&o.getChildren){var i=n._lifetime;return n.expanding(!0),Q(MsPortalFx.Base.Promises.cancelOnDispose(i,Q(o.getChildren())).then((function(){var t=d.createChildRows(i,o.children||[],n.level());return e.children(t),e.expanded(!0),n.expandable(!!t.length),r&&l._updateRows(),!0})).catch((function(e){return!MsPortalFx.Errors.isInstanceOfErrorType(e,MsPortalFx.Errors.CanceledError)&&Q.resolve(e)})).finally((function(){n.expanding(!1)})))}}return Q(!0)},w=function(e,r){var n=l.isHierarchical();if(n&&r){var t=e?c.canExpandAll:c.canCollapseAll;t&&(n=t(a))}if(n){n=!1;var i=a.rowGroups(),s=a.rows();o(i.length?i:s,(function(t){return n||(n=v(t,e,r,void 0)),!n}))}return n},_=function(e,r){return ko.ignoreDependencies((function(){var n=w(e,r);if(n){var t=a.rowGroups.peek(),o=a.rows.peek(),s=t.length?t:o;return Promise.resolve(i(s.slice(),(function(n){return g(n,e,r,!1,void 0).then((function(){return!0}))})).finally((function(){l._updateRows();var r=e?c.onExpandAll:c.onCollapseAll;r&&r(a)})))}return Promise.resolve(n)}))},x=new Map,G=function(){x.clear()},b=function(e){o(e,(function(e){return x.set(e.id,e.expanded.peek()),!0}))};l.on({extendGrid:function(e,r,n,o){r.hierarchy={},t.defProps(r.hierarchy,{canCollapseAll:function(){return w(!1,!0)},canCollapseRow:function(e){return v(e,!1,!0,!1)},canCollapseRowGroup:function(e){return v(e,!1,!0,!0)},canExpandAll:function(){return w(!0,!0)},canExpandRow:function(e){return v(e,!0,!0,!1)},canExpandRowGroup:function(e){return v(e,!0,!0,!0)},collapseAll:function(){return _(!1,!1)},collapseRow:function(e){return g(e,!1,!1,!0,!1)},collapseRowGroup:function(e){return Promise.resolve(g(e,!1,!1,!0,!0))},expandAll:function(){return _(!0,!1)},expandRow:function(e){return g(e,!0,!1,!0,!1)},expandRowGroup:function(e){return Promise.resolve(g(e,!0,!1,!0,!0))}}),t.defProps(n,{isHierarchical:f,expandOrCollapseRowOrRowGroup:function(e,r){return g(e,r,!0,!0,void 0)},hasHierarchicalColumn:p,_saveExpandedStates:b,_clearExpandedStates:G})},extendRow:function(e,r,o,i,a){var l=o._node.source,s=(a&&a.parentLevel||0)+1,u=!1,d=!1;if(n.isParentNode(l))if(l.children){if(l.children.length){u=!0;var f=x.get(r.id),p=1===s;d=c.supplyInitialExpansionForItem&&n.isDataNode(l)?c.supplyInitialExpansionForItem(f,p,s,l.item):MsPortalFx.initValue(f,p)}}else u=!0;t.defProps(r,{expanded:ko.observable(d)}),t.defLocalProps(r,{children:ko.observableArray()}),t.defProps(o,{expandable:ko.observable(u),expanding:ko.observable(!1),level:ko.observable(s),setsize:ko.observable(1),posinset:ko.observable(1)})},initRow:function(e,r,n,t){var o=n._node;if(o.children){var i=d.createChildRows(e,o.children,n.level());r.children(i)}},extendRowGroup:function(e,r,o,i){var a=o._node.source,l=!1,s=!1;if(n.isParentNode(a))if(a.children){if(a.children.length){l=!0;var u=x.get(r.id);s=c.supplyInitialExpansionForGroup&&n.isGroupNode(a)?c.supplyInitialExpansionForGroup(u,true,a.group):MsPortalFx.initValue(u,true)}}else l=!0;t.defProps(r,{expanded:ko.observable(s)}),t.defLocalProps(r,{children:ko.observableArray()}),t.defProps(o,{expandable:ko.observable(l),expanding:ko.observable(!1),level:ko.observable(1),setsize:ko.observable(1),posinset:ko.observable(1)})},initRowGroup:function(e,r,n,t){var o=n._node;if(o.children){var i=d.createChildRows(e,o.children,n.level());r.children(i)}},onReset:function(){G()}})}return d}return __extends(r,e),r.prototype.createChildRows=function(e,r,n){var t=this,o=[];return r.forEach((function(r){var i=t._gridInternal._createRow(e,r,{parentLevel:n});o.push(i)})),o},r.prototype.enableHierarchy=function(e,r){this._isHierarchical(e),this._hasHierarchicalColumn(r)},r}(n.Plugin);r.Plugin=a})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var i=function(e){function r(r,t,i,a,l){var s=e.call(this,r,t,i,a)||this;if(a.hover||{}){var u=i._allRows,d=ko.observable(null),c=n.observableArrayMap(r,(function(e){return e.id}));u.mapInto(r,(function(e,r){return r}),c);var f=function(e,r){e=e||null;var n=d.peek();if(e!==n){if(n){var t=o.internal(n);n.hovered(!1),t.programmaticHovered(!1)}if(e)if(e.hovered(!0),r)o.internal(e).programmaticHovered(!0);d(e)}},p=function(e){var r=!e||function(e){return!o.internal(e).isGroup}(e);return r&&f(e,!0),Q(r)},v=function(e){var r,n=!0;if(!MsPortalFx.isNullOrUndefined(e)){var t=o.convertToString(e);n=!!(r=c.get(t))}return n?p(r):Q(n)},g=function(e){return f(e,!1),Q()};i.on({extendGrid:function(e,r,n,t){r.hover={},o.defLocalProps(r.hover,{hoverRow:p,hoveredRow:d,hoverRowById:v}),n.notifyHoverRow=g},initGrid:function(e,r,n,t){u.subscribeArrayDeletes(e,(function(e){var r=d.peek();r&&e===r&&d(null)}))},extendRow:function(e,r,n,t){o.defLocalProps(r,{hovered:ko.observable(!1)}),n.programmaticHovered=ko.observable(!1)}})}return s}return __extends(r,e),r}(t.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=function(e){function r(r,n,o,i){var a=e.call(this,r,n,o,i)||this,l=MsPortalFx.initValue(i.resizing,{});if(l){var s=l.onColumnsResized,u=function(e,r,o){e.forEach((function(e,r){t.internal(e).minWidth(o[r])})),e.forEach((function(e,n){e.width(r[n])})),s&&s(e,n)};o.on({extendGrid:function(e,r,n,t){r.resizing={resizeColumns:u}},extendColumn:function(e,r,n,o){t.defProps(r,{canResize:MsPortalFx.initObservable(o.canResize,!0)})}})}return a}return __extends(r,e),r}(n.Plugin);r.Plugin=o})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var t=function(e){function r(r,n,t,o,i){var a=e.call(this,r,n,t,o)||this,l=MsPortalFx.initValue(o.scrolling,{});if(l){var s=!(!i||!i.detectVScroll)&&void 0,u=MsPortalFx.initValue(l.horizontal,!0),d=MsPortalFx.initValue(l.vertical,s);t.on({initGrid:function(){n.scrolling={horizontal:u,vertical:d},t.hscroll=u,d&&t.vscroll(!0)}})}return a}return __extends(r,e),r}(n.Plugin);r.Plugin=t})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection",["require","exports","FxInternal/Utils/KnockoutArrayUtils","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o){"use strict";function i(e){return!o.internal(e).isGroup}function a(e){return!o.internal(e).excluded.peek()&&e.selectable.peek()}Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=r.wrapContextRows=void 0,r.wrapContextRows=function(e){var r=e.selectedOrCurrentRows;return ko.pureComputed((function(){var n=[];if(r)n=r();else{var t=ko.unwrap(e);t&&(n=Array.isArray(t)?t:[t])}return n}))};var l=function(e){function r(r,l,s,u,d){var c=e.call(this,r,l,s,u)||this;d||(d={virtualized:!1,enabledByDefault:!1});var f=u.selection||(d.enabledByDefault?{}:null);if(f){var p=MsPortalFx.wrap(!0),v=MsPortalFx.initValue(f.selectionMode,0),g=MsPortalFx.initValue(f.selectOnNavigation,!0),h=ko.observable(!1),m=0===v,w=1===v,_=MsPortalFx.initObservable(f.visible,!0),x=s._allRows,G=n.observableArrayMap(r,(function(e){return e.item}));x.mapInto(r,(function(e,r){return r}),G);var b=n.observableArrayMap(r,(function(e){return e.id}));x.mapInto(r,(function(e,r){return r}),b);var C=ko.observable(!1),P=n.observableArrayMap(r,(function(e){return e.id})),R=ko.observableArray();ko.reactor(r,(function(){var e=x().filter((function(e){var r=o.internal(e).excluded();return e.selectable()&&!r}));R(e)}));var F=ko.observableArray();o.subscribe(r,P,(function(e){var r=F(),n=e.filter((function(e){return!!e.row})).map((function(e){return e.row}));(n.length!==r.length||n.some((function(e,n){return e!==r[n]})))&&F(n)}));var M,y=ko.observableArray(),I=ko.observable(0),k=ko.observable(0),O=P.mapInto(r,(function(e,r){var n=r.item;if(MsPortalFx.isNullOrUndefined(n))throw new MsPortalFx.Errors.Error("null item in selection");return r.item})),S=ko.observableArray(),L=function(e){return e&&!e.disabled()},A=function(e){return L(G.get(e))},E=f.canSelectItem||A,B=f.canUnselectItem||A,D=f.canSelectAllItems||p,T=f.canUnselectAllItems||p,U=f.canSelectRow||L,N=f.canUnselectRow||L,V=f.canSelectAllRows||p,H=f.canUnselectAllRows||p,j=C,Q=function(e,r){var n=!!e&&!h();if(n){var t=e.row,o=e.item;(n=!!t||!!o)&&t&&(n=t.selectable()&&i(t))&&r&&(n=U(t,l)),n&&o&&r&&(n=E(o,l))}return n},q=function(e,r){var n=Q(e,r);if(n){var t=e.row,o=e.item,i=!1;t?i=t.selected():o&&(i=O().includes(o)),i||(m?(P([e]),g&&l.focus.moveToRow(e.row)):P.push(e))}return n},z=function(e,r){var n=!!e&&!h();if(n){var t=e.row,o=e.item;(n=!!t||!!o)&&t&&(n=t.selectable()&&i(t))&&r&&(n=N(t,l)),n&&o&&r&&(n=B(o,l))}return n},W=function(e){var r=P.get(e.id);r&&(P.remove(r),C(!1))},K=function(e,r){var n=z(e,r);return n&&W(e),n},J=void 0!==f.selectAllDisabled?ko.utils.wrap(f.selectAllDisabled):ko.pureComputed((function(){return!s._allRowsLoaded()})),X=function(e){var r=!J()&&w&&!h();return r&&e?D(l)&&V(l):r},Y=function(e){var r=X(e);if(r){var n=!0,t=R().filter((function(r){var t=!0;return!r.selected()&&e&&(t=E(r.item,l)&&U(r,l)),t||(n=!1),t})).map(re);C(n),P(t)}return r},Z=function(e){var r=!h();return r&&e?T(l)&&H(l):r},$=function(e,r){var n=Z(r);if(n){var t=C.peek(),o=P.peek(),i=o.filter((function(e){var n=!0;return r&&(n=B(e.item,l)&&N(e.row,l)),!n}));(n=0===i.length||i.length!==o.length)&&(t&&C(!1),i.length!==o.length&&P(i)),e&&s.clearCurrentRowOrRowGroup()}return n},ee=ko.pureComputed((function(){var e=I(),r=k();return e>0&&r>0&&e===r})),re=function(e){var r;return e&&(r={row:e,item:e.item,id:e.id}),r},ne=function(e){var r;if(e){var n=G.get(e);if(n)r=re(n);else{var t=s._nodesByItem.get(e),o=void 0;t&&(o=t.id),r={item:e,id:o}}}return r},te=function(e){var r,n=o.convertToString(e);if(n){var t=b.get(n),i=void 0,a=s._nodesById.get(n);a&&(i=a.item)&&!t&&(t=G.get(i)),r={row:t,item:i,id:n}}return r},oe=function(e,n){var t,o=h();o||(M?M.row!==e&&(M.discard=!0,null===(t=M.ltm)||void 0===t||t.dispose()):M={discard:!1,row:e,allSelected:!1,selectedIds:P().map((function(e){return e.id}))});try{if(e&&g&&(h(!1),$(!1,!1),s.moveToFocusedRowOrRowGroup(e)),!n&&M&&!M.ltm)M.ltm=r.createChildLifetime(),(g?y:F).fxOnce(M.ltm,(function(e){var r,n=P().map((function(e){return e.id}));!M||!1===M.allSelected&&M.selectedIds===n||(M.discard=!0,null===(r=M.ltm)||void 0===r||r.dispose())}))}finally{(n||o)&&h(!0)}},ie=function(){var e;h()&&h(!1);var r=M;return M=null,r&&(null===(e=r.ltm)||void 0===e||e.dispose()),r},ae=function(){var e=ie();e&&!e.discard&&($(!1,!1),e.allSelected&&Y(!1),e.selectedIds&&e.selectedIds.forEach((function(e){q(te(e),!1)})))};s.on({extendGrid:function(e,r,n,t){r.selection={},o.defProps(r.selection,{selectionMode:v,selectAllDisabled:J,allRowsSelected:ee,selectedRows:F,selectedOrCurrentRows:y,canSelectRow:function(e){return Q(re(e),!0)},canUnselectRow:function(e){return z(re(e),!0)},canSelectAllRows:ko.pureComputed((function(){return X(!0)})),canUnselectAllRows:ko.pureComputed((function(){return Z(!0)})),visible:_}),o.defLocalProps(r.selection,{allItemsSelected:j,selectedItems:O,selectedOrCurrentItems:S,canSelectItem:function(e){return Q(ne(e),!0)},selectItem:function(e){return q(ne(e),!1)},selectRow:function(e){return q(re(e),!1)},canUnselectItem:function(e){return z(ne(e),!0)},unselectItem:function(e){return K(ne(e),!1)},unselectRow:function(e){return K(re(e),!1)},canSelectAllItems:ko.pureComputed((function(){return X(!0)})),selectAllItems:function(){return Y(!1)},selectAllRows:function(){return Y(!1)},canUnselectAllItems:ko.pureComputed((function(){return Z(!0)})),unselectAllItems:function(){return $(!0,!1)},unselectAllRows:function(){return $(!0,!1)},selectItemById:function(e){return q(te(e),!1)},unselectItemById:function(e){return K(te(e),!1)}}),o.defProps(n,{selectOnNavigation:g,selectionFrozen:h,selectRow:function(e){return q(re(e),!0)},unselectRow:function(e){return K(re(e),!0)},selectAllRows:function(){return Y(!0)},unselectAllRows:function(){return $(!1,!0)}}),o.defLocalProps(n,{saveSelection:oe,restoreSelection:ae})},initGrid:function(e,r,n,t){k(R().length),R.subscribeArrayBulkChanges(e,(function(e,r){r.forEach((function(e){W(re(e))})),k(k()+e.length-r.length)})),F.subscribeArrayBulkChanges(e,(function(e,r){e.forEach((function(e){e.selected(!0)})),r.forEach((function(e){e.selected(!1)})),I(I()+e.length-r.length)})),ko.reactor(e,(function(){var e=[],n=F();if(n.length)e=n.slice();else{var t=r.focus.currentRow();t&&i(t)&&a(t)&&(e=[t])}var o=y.peek();(o.length!==e.length||o.some((function(r,n){return r!==e[n]})))&&y(e)})),n._nodesById.subscribeArrayBulkChanges(e,(function(e,r){r.forEach((function(e){var r=e.id,t=P.get(r);if(t){var o=n._nodesById.get(r);o?(K(t,!1),q(function(e){var r;if(e){var n=e.id,t=e.item;r={row:b.get(n)||G.get(t),item:t,id:n}}return r}(o),!1)):K(t,!1)}}))})),ko.reactor(e,(function(){var e=[],n=O();if(n.length)e=n.slice();else{var t=r.focus.currentRow();t&&i(t)&&a(t)&&(e=[t.item])}S(e)}))},extendRow:function(e,r,n,t){var o;r.selected=ko.observable(!1),r.selectable=MsPortalFx.initObservable(null===(o=null==f?void 0:f.isSelectableItem)||void 0===o?void 0:o.call(f,r.item,e,l),!0)},rowOrRowGroupChanged:function(e,r){m&&g&&(e&&t.isRow(e)?q(re(e),!0):r&&t.isRow(r)&&K(re(r),!0))},onReset:function(){ie(),$(!0,!1)}})}return c}return __extends(r,e),r}(t.Plugin);r.Plugin=l})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=MsPortalFx.Resources.Strings.CoreGrid,i=function(e){function r(r,n,i,a,l){var s=e.call(this,r,n,i,a)||this;s.getCurrentSortOrder=function(){return[]},s.getColumnSortOrder=function(){return[]},s.updateSortOrder=function(){};var u=MsPortalFx.initValue(a.sorting,{});if(u){var d=ko.observableArray(),c=ko.observableArray(),f=u.canSortAdditionalColumns,p=ko.observable(!0),v=function(e,r){var n=e.map((function(e,n){return{id:e.id,direction:r[n]}}));return l.onColumnSortingStart(n,o.sorting)};s.getCurrentSortOrder=function(){return c.peek()},s.getColumnSortOrder=function(){return d.peek()},s.updateSortOrder=function(e){var r=e.map((function(e){return e.id})),t=e.map((function(e){return e.direction}));n.columns().forEach((function(e){var n=r.indexOf(e.id);-1!==n?e.sortDirection(t[n]):e.sortDirection(0)})),c(e)},i.on({extendGrid:function(e,r,n,o){r.sorting={sortOrder:c},t.defProps(n,{canSortAdditionalColumns:p,sortColumns:v})},extendColumn:function(e,r,n,o){t.defProps(r,{canSort:MsPortalFx.initObservable(o.canSort,!1),sortDirection:MsPortalFx.initObservable(o.sortDirection,0)})},initGrid:function(){ko.reactor(r,(function(){var e=n.columns().filter((function(e){return 0!==e.sortDirection()&&e.canSort()})).map((function(e){return{id:e.id,direction:(0,e.sortDirection)()}}));d(e)})),f&&ko.reactor(r,(function(){p(f(c(),n))}))}})}return s}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","Fx/Controls/Toolbar"],(function(e,r,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=r.createToolbarButton=void 0,r.createToolbarButton=function(e,r,n,i,a,l){var s=t.extend(a,l),u=MsPortalFx.initObservable(l&&l.disabled,!1),d=t.extend(s,{disabled:ko.pureComputed({read:function(){return u()||!n(r())},write:function(e){u(e)}}),onClick:function(){i(r())}});return o.ToolbarItems.createBasicButton(e,d)};var i=function(e){function r(r,n,t,o,i){var a=e.call(this,r,n,t,o)||this,l=o.toolbar;return l&&t.on({extendGrid:function(e,r,n,t){r.toolbar={visible:MsPortalFx.initObservable(l.visible,!0),viewModel:null}},initGrid:function(){var e=(l.createToolbar||i.createToolbar)(a._lifetime,n);n.toolbar.viewModel=e}}),a}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.DataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(e,r,n,t,o,i,a,l,s,u,d,c,f,p,v,g){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=void 0;var h=function(e){function r(r,n){var i=e.call(this,r,n)||this;i._lastParams=null;var h=i,m=i._msPortalFxInternal,w=i.header,_=n.header||{},x=MsPortalFx.isFeatureEnabled("enablegrid2pagedrender");m.renderMode=x?1:0,i.controlType=131;var G=ko.observableArray(),b=ko.observableArray();return t.defLocalProps(h,{rows:G,rowGroups:b}),i._dataSource=n.dataSource,i._rowMap=new Map,i._rootNodes=ko.observableArray(),i._rootRowsOrGroups=ko.observableArray(),i._previousRowMap=null,i._refreshLifetime=null,m.visibleRows=ko.observableArray(),m._allRows=ko.observableArray(),m._allRowsLoaded=ko.observable(!0),m.totalRowCount=t.computed(r,m._allRows,b,(function(e,r){return e().length+r().length})),i._plugins=[new s.Plugin(r,h,m,n),new v.Plugin(r,h,m,n),new o.Plugin(r,h,m,n),new f.Plugin(r,h,m,n),new p.Plugin(r,h,m,n,{detectVScroll:!0}),new a.Plugin(r,h,m,n,{}),i._sortingPlugin=new g.Plugin(r,h,m,n,{onColumnSortingStart:function(e,r){return i._refreshInternal({message:r,params:i._lastParams,sortOrder:e})}}),new l.Plugin(r,h,m,n),i._hierarchyPlugin=new d.Plugin(r,h,m,n),new c.Plugin(r,h,m,n),i._groupingPlugin=new u.Plugin(r,h,m,n)],i._extendGrid(r,h,m,n),i._extendHeader(r,w,_),i._initGrid(r,h,m,n),i._initHeader(r,w,_),i}return __extends(r,e),r.prototype._initGrid=function(r,n,o,i){var a=this;e.prototype._initGrid.call(this,r,n,o,i),this._rootNodes.mapInto(r,(function(e,n){var i,l=n.id;if(void 0!==l&&a._previousRowMap){var s=a._previousRowMap.get(l);if(s){var u=t.internal(s)._node;u.isGroup!==n.isGroup||u.item!==n.item||u.group!==n.group||s.children.peek().length||(i=s,a._previousRowMap.delete(l))}}if(!i){var d=r.createChildLifetime();i=n.isGroup?o._createRowGroup(d,n):o._createRow(d,n)}return void 0!==l&&a._rowMap.set(l,i),i}),this._rootRowsOrGroups)},r.prototype._updateRows=function(){var e=this._msPortalFxInternal,r=[],n=[],o=[],i=[],a=[],l=!0,s=!1,u=0;if(this._rootRowsOrGroups.peek().length)for(var d=void 0,c=void 0,f=void 0,p=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];p.length;){var v=p[p.length-1],g=v.level,h=v.index,m=v.rows,w=v.expanded;if(h<m.length){d=m[h],f=(c=t.internal(d))._node,n.push(f),v.index++,w&&a.push(d),1===g&&(c.isGroup?i.push(d):o.push(d)),c.isGroup||(r.push(d),2===g&&i.length&&o.push(d));var _=d.children&&d.children.peek(),x=w&&d.expanded&&d.expanded.peek();_&&_.length&&p.push({level:g+1,expanded:x,index:0,rows:_}),l&&f.getChildren&&(l=!1),(f.children||f.getChildren)&&(s=!0,g>u&&(u=g))}else p.pop()}var G=u>1||1===u&&!i.length;this._hierarchyPlugin.enableHierarchy(s,G),this._groupingPlugin.enableGrouping(!!i.length),this._nodes(n),this.noData(!n.length),e._allRows(r),e._allRowsLoaded(l),e.visibleRows(a),this.rows(o),this.rowGroups(i)},r.prototype._createFormatter=function(e,r){return i.create(e,r)},r.prototype.refresh=function(e){var r=(e=e||{}).sortOrder||this._sortingPlugin.getColumnSortOrder();return this._refreshInternal(__assign(__assign({},e),{sortOrder:r}))},r.prototype._refreshInternal=function(e){var r=this,n=e.reset,o=e.params,i=e.showMessage,a=e.sortOrder,l=this._msPortalFxInternal;this._lastParams=o,this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,n||(l.saveSelection&&l.saveSelection(null,!0),l._saveExpandedStates&&l._saveExpandedStates(this._rootRowsOrGroups.peek())),l.showLoadingUI(!1!==i)),n&&l.trigger.onReset();var s=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),u=i&&l.showLoadingUI()?Q.defer():null,d=Q(MsPortalFx.Base.Promises.cancelOnDispose(s,(function(){return u?u.promise.then((function(){return Q(r._dataSource({reset:n,sortOrder:a,params:o}))})):Q(r._dataSource({reset:n,sortOrder:a,params:o}))})).then((function(e){var n=[];e&&t.isArray(e)&&e.forEach((function(e){if(MsPortalFx.isNullOrUndefined(e)||MsPortalFx.isNullOrUndefined(e.item)&&MsPortalFx.isNullOrUndefined(e.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");n.push(l._createInternalNode(e))}));s&&s===r._refreshLifetime&&(r._rootNodes(n),r._sortingPlugin.updateSortOrder(a),l._updateRows())})).catch((function(e){throw s&&s===r._refreshLifetime&&(r._rootNodes([]),l._updateRows()),e})).finally((function(){s&&s.dispose(),s&&s===r._refreshLifetime&&(l.showLoadingUI(!0),!n&&r._msPortalFxInternal.restoreSelection&&r._msPortalFxInternal.restoreSelection()),r._previousRowMap&&(r._previousRowMap.forEach((function(e,r){t.internal(e)._lifetime.dispose()})),r._previousRowMap=null)}))),c=e||{};return this.displayLoadingMessage(d,{message:c.message,completedMessage:c.completedMessage,completedDataMessage:c.completedDataMessage,completedNoDataMessage:c.completedNoDataMessage}).finally((function(){u&&u.resolve()})),d.finally((function(){}))},r}(n.ViewModel);r.ViewModel=h})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","Fx"],(function(e,r,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var i=function(e){function r(r,n,i,a){var l=e.call(this,r,n,i,a)||this,s=a.addition;if(s){var u=ko.observable(),d=s.canAddRow||MsPortalFx.wrap(!0),c=s.onAddRow,f=function(){var e,r=!!(e=u())&&e.dirty()&&d(n);if(r){var o=u();i.transferAdditionalRows();var a=t.internal(o);a._canStopEditing(!0),a.placeholder(!1),a.excluded(!1),a.tabbable(!1),u(null),n.dirty(!0),o.cells().forEach((function(e){return e.dirty(!0)})),c&&c(o,n)}return r},p=function(){return d(n)},v=function(){var e=p(),o=u();if(e&&!o){var a=r.createChildLifetime(),l=s.createItem(),d=i._createRow(a,i._createInternalNode({item:l,id:null})),c=t.internal(d);c.placeholder(!0),c.excluded(!0),c.tabbable(!0),u(d),i.additionalRows([d]),c._canStopEditing(!1),n.editing.editRow(d)}else if(!e&&o){u(null),i.additionalRows([]),(a=t.internal(o)._lifetime).dispose()}};i.on({extendGrid:function(e,r,n,t){r.addition={canAddRow:ko.pureComputed(p)}},initGrid:function(e,r,n,t){var i=e.createChildLifetime();ko.reactor(i,(function(){var e=u();e&&e.dirty()&&o.nextTick((function(){i.isDisposed()||(f(),v())}))})),ko.reactor(i,(function(){p(),o.nextTick((function(){i.isDisposed()||v()}))}))},extendRow:function(e,r,n,t){n.placeholder=ko.observable(!1)}})}return l}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var a=MsPortalFx.Resources.Strings.EditableGrid,l=MsPortalFx.Base.Images.Delete(),s=function(e){function r(r,n,s,u){var d=e.call(this,r,n,s,u)||this,c=u.deletion;if(c){var f=c.canDeleteRows||MsPortalFx.wrap(!0),p=c.onDeleteRows,v=c.formatDeleteRowsMessage||function(e,r){return(e.length>1?a.deleteRowsMessagePlural:a.deleteRowsMessageSingular).format(r)},g=n.items,h=[],m=function(e,r){var t=!!(null==e?void 0:e.length);return t&&r&&(t=f(e,n)),t},w=function(e,r){var t,o=m(e,r);if(o&&((o=(e=e.slice()).every((function(e){e.focused()&&n.focus.moveDown();var r=g.indexOf(e.item);return g.splice(r,1),void 0===t&&(t=r+1),!0})))&&(h.splice.apply(h,__spreadArray([0,h.length],e,!1)),n.dirty(!0),p&&p(e,n),v))){var i=v(e,t,n);i&&s.announcement(i)}return o},_=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return m(e,!0)}),(function(e){return w(e,!0)}),{telemetryName:"DeleteRows",label:a.deleteCommandText,icon:l},n)};s.on({extendGrid:function(e,r,n,t){r.deletion={},i.defLocalProps(r.deletion,{canDeleteRows:function(e){return m(e,!0)},deleteRows:function(e){return w(e,!1)},createDeleteRowsCommand:_}),i.defProps(n,{deleteRows:function(e){return w(e,!0)}})}})}return d}return __extends(r,e),r}(n.Plugin);r.Plugin=s})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=MsPortalFx.wrap(!0),i=function(e){function r(r,i,a,l){var s=e.call(this,r,i,a,l)||this,u=l.editing||{},d=u.canEditRow||o,c=u.canStopEditingRow||MsPortalFx.wrap(Q(!0)),f=function(e){return!!e&&!e.disabled()&&d(e,i)},p=function(e){var r=f(e);if(r&&!e.editing()){var n=t.internal(e),o=n._editingLifetime=n._lifetime.createChildLifetime();e.cells.mapInto(o,(function(r,n){var o=t.internal(n.column)._definition.createCellEditor,i=t.internal(n),a=i._editorLifetime;if(o&&!a){var l=o(a=i._editorLifetime=i._lifetime.createChildLifetime(),e.item,e);t.reactor(a,l,(function(e){n.editor(e())}))}})),e.editing(!0)}return r},v=function(e){var r=!!e;if(r&&(r=t.internal(e)._canStopEditing()&&!e.focused()&&!e.disabled()&&e.editing()&&0===e.validationErrors().length))return Q(c(e,i)).then((function(r){return r&&e.dirty()?e.triggerValidation().then((function(){return 0===e.validationErrors().length})):r}));return Q(r)},g=function(e){return v(e).then((function(r){if(r){var n=t.internal(e);n._editingLifetime&&n._editingLifetime.dispose(),e.editing(!1)}return r}))},h=ko.observable().extend({rateLimit:{method:"notifyWhenChangesStop",timeout:200}});return t.subscribe(r,h,(function(e){p(e)})),a.on({extendGrid:function(e,r,n,t){r.editing={canEditRow:f,editRow:p,canStopEditingRow:v,stopEditingRow:g},n.ariaReadOnly=!1},extendRow:function(e,r,n,t){r.editing=ko.observable(!1);var o=ko.observable(!0);n._canStopEditing=ko.pureComputed({read:function(){return o()&&!r.validationErrors().length},write:function(e){o(e)}}),n._editingLifetime=null,r.dirty=ko.pureComputed((function(){return r.cells().some((function(e){return e.dirty()}))}))},extendColumn:function(e,r,n,t){n.ariaReadOnly=!t.createCellEditor},extendCell:function(e,r,n,t){Object.defineProperty(r,"editorLifetime",{enumerable:!1,writable:!0,configurable:!1,value:void 0}),r.editor=ko.observable(),r.dirty=ko.observable(!1),n._editorLifetime=null},initCell:function(e,r,n,t){ko.reactor(e,(function(){var e=r.editor(),n=e&&e.dirty;n&&ko.unwrap(n)&&(r.dirty(!0),i.dirty(!0))}))},rowOrRowGroupChanged:function(e,r){r&&n.isRow(r)&&r.editing()&&i.editing.stopEditingRow(r),e&&!n.isRow(e)||h(e)},clearDirty:function(){i.rows().forEach((function(e){e.dirty()&&e.cells().forEach((function(e){if(e.dirty()){var r=e.editor(),n=r&&r.dirty;ko.isObservable(n)&&n(!1),e.dirty(!1)}}))}))}}),s}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var a=MsPortalFx.Resources.Strings.EditableGrid,l=MsPortalFx.Base.Images.Insert(),s=function(e){function r(r,n,s,u){var d=e.call(this,r,n,s,u)||this,c=u.insertion;if(c){var f=c.createItem,p=n.rows,v=n.items,g=MsPortalFx.wrap(!0),h=c.canInsertRow||g,m=c.onInsertRow,w=c.formatInsertRowMessage||function(e,r){return a.insertRowMessageSingular.format(r)},_=function(e,r){var t=e&&p().includes(e);return t&&r&&(t=h(e,n)),t},x=function(e,r){var t=_(e,r);if(t){var o=f(),i=p().indexOf(e);v.splice(i,0,o);var a=p()[i];if(t=n.focus.moveToRow(a),n.dirty(!0),a.cells().forEach((function(e){return e.dirty(!0)})),m&&m(a,n),w){var l=w(a,i+1,n);l&&s.announcement(l)}}return t},G=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return 1===e.length&&_(e[0],!0)}),(function(e){var r=e&&e[0];return x(r,!0)}),{telemetryName:"InsertRow",label:a.insertCommandText,icon:l},n)};s.on({extendGrid:function(e,r,n,t){r.insertion={},i.defLocalProps(r.insertion,{canInsertRow:function(e){return _(e,!0)},insertRow:function(e){return x(e,!1)},createInsertRowCommand:G}),i.defProps(n,{insertRow:function(e){return x(e,!0)}})}})}return d}return __extends(r,e),r}(n.Plugin);r.Plugin=s})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util"],(function(e,r,n,t,o,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var a=MsPortalFx.Resources.Strings.EditableGrid,l=MsPortalFx.Base.Images.ArrowUp(),s=MsPortalFx.Base.Images.ArrowDown(),u=MsPortalFx.Base.Images.Upload(),d=MsPortalFx.Base.Images.Download(),c=MsPortalFx.wrap(!0),f=function(e){function r(r,n,f,p){var v=e.call(this,r,n,f,p)||this,g=p.reordering;if(g){var h=n.rows,m=n.items,w=MsPortalFx.initObservable(g.visible,!0),_=g.canMoveRowsToRow||c,x=g.canMoveRowsUp||c,G=g.canMoveRowsDown||c,b=g.canMoveRowsTop||c,C=g.canMoveRowsBottom||c,P=g.onMoveRowsToRow,R=g.onMoveRowsUp,F=g.onMoveRowsDown,M=g.onMoveRowsTop,y=g.onMoveRowsBottom,I=g.formatMoveRowsToRowMessage||function(e,r){return(e.length>1?a.moveToMessagePlural:a.moveToMessageSingular).format(r)},k=g.formatMoveRowsUpMessage||function(e,r){return(e.length>1?a.moveUpMessagePlural:a.moveUpMessageSingular).format(r)},O=g.formatMoveRowsDownMessage||function(e,r){return(e.length>1?a.moveDownMessagePlural:a.moveDownMessageSingular).format(r)},S=g.formatMoveRowsTopMessage||function(e){return e.length>1?a.moveTopMessagePlural:a.moveTopMessageSingular},L=g.formatMoveRowsBottomMessage||function(e){return e.length>1?a.moveBottomMessagePlural:a.moveBottomMessageSingular},A=function(e,r,t){var o=!(!(null==e?void 0:e.length)||!r);return o&&t&&(o=_(e,r,n)),o},E=function(e,r){e=e.slice();for(var t,o,i=h(),a=e.length+1,l=[],s=[],u=0,d=0;d<i.length&&a;d++){var c=i[d],f=MsPortalFx.remove(e,c)[0];f?(l.push(f),void 0===t&&(u++,t=d),a--):c===r?(o=s.length,s.push(c),void 0===t&&(t=d),a--):void 0!==t&&s.push(c)}var p=0===a;if(p){s.splice.apply(s,[o+u,0].concat(l));var v=[t,s.length];v=v.concat(s.map((function(e){return e.item}))),m.splice.apply(m,v),n.dirty(!0)}return{execute:p,start:t}},B=function(e,r,t){var o,i=A(e,r,t);if(i){var a;if(i=(o=E(e,r)).execute,a=o.start,i&&(P&&P(e,r,n),I)){var l=I(e,a+1,r,n);l&&f.announcement(l)}}return i},D=function(e,r){var t=h(),o=!!(null==e?void 0:e.length)&&t.length>e.length;if(o){var i=t[0];o=!e.includes(i)}return o&&r&&(o=x(e,n)),o},T=function(e,r){var t=D(e,r);if(t){for(var o=h(),i=void 0,a=[],l=void 0,s=(e=e.slice()).length+1,u=0;u<o.length&&s;u++){var d=o[u];if(MsPortalFx.remove(e,d)[0]){if(0===u)return!1;void 0===l&&(i=o[l=u-1]),s--,a.push(d),u===o.length-1&&(s--,a.push(i))}else void 0!==l&&(a.push(i),i=d,1===s&&s--)}if(t=0===s){var c=[l,a.length];if(m.splice.apply(m,c.concat(a.map((function(e){return e.item})))),n.dirty(!0),R&&R(e,n),k){var p=k(e,l+1,n);p&&f.announcement(p)}}}return t},U=function(e,r){var t=h(),o=!!(null==e?void 0:e.length)&&t.length>e.length;if(o){var i=t[t.length-1];o=!e.includes(i)}return o&&r&&(o=G(e,n)),o},N=function(e,r){var t=U(e,r);if(t){for(var o=h(),i=[],a=void 0,l=(e=e.slice()).length+1,s=0,u=0;u<o.length&&l;u++){var d=o[u];MsPortalFx.remove(e,d)[0]?(void 0===a&&(a=u),i.push(d),l--):void 0!==a&&(i.splice(s,0,d),s=i.length,1===l&&l--)}if(t=0===l){var c=[a,i.length];if(m.splice.apply(m,c.concat(i.map((function(e){return e.item})))),n.dirty(!0),F&&F(e,n),O){var p=O(e,a+1,n);p&&f.announcement(p)}}}return t},V=function(e,r){var t=h(),o=!!(null==e?void 0:e.length)&&t.length>e.length;return o&&r&&(o=b(e,n)),o},H=function(e,r){var t=V(e,r);if(t){var o=h();if((t=E(e,o[0]).execute)&&(M&&M(e,n),S)){var i=S(e,n);i&&f.announcement(i)}}return t},j=function(e,r){var t=h(),o=!!(null==e?void 0:e.length)&&t.length>e.length;return o&&r&&(o=C(e,n)),o},Q=function(e,r){var t=j(e,r);if(t){var o=h();if((t=E(e,o[o.length-1]).execute)&&(y&&y(e,n),L)){var i=L(e,n);i&&f.announcement(i)}}return t},q=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return D(e,!0)}),(function(e){return T(e,!0)}),{telemetryName:"MoveUp",label:a.moveUpCommandText,icon:l},n)},z=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return U(e,!0)}),(function(e){return N(e,!0)}),{telemetryName:"MoveDown",label:a.moveDownCommandText,icon:s},n)},W=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return V(e,!0)}),(function(e){return H(e,!0)}),{telemetryName:"MoveTop",label:a.moveTopCommandText,icon:u},n)},K=function(e,r,n){var i=t.wrapContextRows(r);return o.createToolbarButton(e,i,(function(e){return j(e,!0)}),(function(e){return Q(e,!0)}),{telemetryName:"MoveBottom",label:a.moveBottomCommandText,icon:d},n)};f.on({extendGrid:function(e,r,n,t){r.reordering={},i.defProps(r.reordering,{visible:w}),i.defLocalProps(r.reordering,{canMoveRowsToRow:function(e,r){return A(e,r,!0)},moveRowsToRow:function(e,r){return B(e,r,!1)},canMoveRowsUp:function(e){return D(e,!0)},moveRowsUp:function(e){return T(e,!1)},canMoveRowsDown:function(e){return U(e,!0)},moveRowsDown:function(e){return N(e,!1)},canMoveRowsTop:function(e){return V(e,!0)},moveRowsTop:function(e){return H(e,!1)},canMoveRowsBottom:function(e){return j(e,!0)},moveRowsBottom:function(e){return Q(e,!1)},createMoveRowsUpCommand:q,createMoveRowsDownCommand:z,createMoveRowsTopCommand:W,createMoveRowsBottomCommand:K}),i.defProps(n,{moveRowsToRow:function(e,r){return B(e,r,!0)},moveRowsUp:function(e){return T(e,!0)},moveRowsDown:function(e){return N(e,!0)},moveRowsTop:function(e){return H(e,!0)},moveRowsBottom:function(e){return Q(e,!0)}})}})}return v}return __extends(r,e),r}(n.Plugin);r.Plugin=f})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Utils/ValidationHelper"],(function(e,r,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var i=MsPortalFx.Base.Promises.cancelOnDispose,a=MsPortalFx.identity,l=function(e){function r(r,n,l,s){var u=e.call(this,r,n,l,s)||this,d=function(){(0,o.tryOnTriggerValidation)(n)},c=s.validation||{},f=ko.observable(!0),p=function(){d();var e=[];if(c.validate){var t=c.validate(n);e.push(Promise.resolve(t))}if(c.validateAsync){var o=i(r,(function(){return c.validateAsync(n)}));e.push(o)}return n.rows().forEach((function(n){if(ko.unwrap(n.editing)&&ko.unwrap(n.dirty)){var t=i(r,(function(){return n.triggerValidation()}));e.push(t)}})),Promise.all(e).then((function(e){var r=e.every(a);return f(r),r}))};return l.on({extendGrid:function(e,r,n,t){r.validation={triggerValidation:p,valid:f},r.valid=f,r.triggerValidation=p,n.canCreateValidationFooter=!!c.createRowValidationFooter},initGrid:function(e,r,n,t){ko.reactor(e,(function(){var e=r.rows().every((function(e){return!e.validationErrors().length}));f(e)}))},extendRow:function(e,r,n,t){r.triggerValidation=function(){d();var e=[];return e.push.apply(e,r.cells().map((function(e){return e.triggerValidation()}))),Promise.all(e).then((function(e){return e.every(a)}))},r.validationErrors=ko.pureComputed((function(){var e=[];return r.cells().forEach((function(r){var n=r.customValidationErrors();n&&n.length&&e.push.apply(e,n),(n=r.editorValidationErrors())&&n.length&&e.push.apply(e,n)})),e})),n.validationFooter=ko.observable()},initRow:function(e,r,n,o){if(l.canCreateValidationFooter){var i=e.createChildLifetime();t.subscribe(i,r.validationErrors,(function(t){t&&t.length&&(i.dispose(),n.validationFooter(c.createRowValidationFooter(e,r)))}))}},extendCell:function(e,r,n,t){r.triggerValidation=function(){d();var e=ko.unwrap(r.editor);return e&&e.triggerValidation?(e.ensureValidation&&e.ensureValidation(1),Q(e.triggerValidation())):Q(!0)},r.customValidationErrors=ko.observableArray(),r.editorValidationErrors=ko.observable([])},initCell:function(e,r,n,t){ko.reactor(e,(function(){var e=ko.unwrap(r.editor),n=e&&e.validationResults,t=[];if(n){var o=ko.unwrap(n);o&&o.forEach((function(e){var r=e.message;r&&!e.valid&&t.push(r)}))}r.editorValidationErrors(t)}))}}),u}return __extends(r,e),r}(n.Plugin);r.Plugin=l})),
define("FxInternal/Data/BaseProjection",["require","exports"],(function(e,r){"use strict";var n=ko.utils,t=MsPortalFx.initValue,o=MsPortalFx.initObservableArray;return function(){function e(e){var r=this;this._lifetime=e.lifetime.createChildLifetime(),this._source=e.source,this._autoRefresh=t(e.autoRefresh,!0),this.destination=o(e.destination),this._internalEdit=!1,this.destination.subscribe(this._lifetime,(function(){if(!r._internalEdit)throw new Error("Modification of projection array not allowed while the projection is active.")})),this._autoRefresh&&FxImpl.subscribeArrayEdits(this._lifetime,this._source,(function(e){r._update(e)}))}return e.prototype._replace=function(e){var r=this.destination.peek(),t=n.compareArrays(r,e,{sparse:!0});this._apply(t)},e.prototype._apply=function(e){var r=n.createArraySplices(e);try{this._internalEdit=!0,r.length?n.applyArraySplices(this.destination,r):this.destination.notifySubscribers([],"arrayChange")}finally{this._internalEdit=!1}},e}()})),
define("FxInternal/Data/JoinProjection",["require","exports","FxInternal/Data/BaseProjection"],(function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){function r(r){var n=e.call(this,r)||this;return n._joinSource=r.joinSource,n._transferring=!1,n._autoRefresh&&FxImpl.subscribeArrayEdits(n._lifetime,n._joinSource,(function(e){n._updateJoin(e)})),n.refresh(),n}return __extends(r,e),r.prototype.refresh=function(){var e=this._source().concat(this._joinSource());this._replace(e)},r.prototype._update=function(e){this._transferring||this._apply(e)},r.prototype._updateJoin=function(e){if(!this._transferring){var r=this._source().length,n=e.map((function(e){return MsPortalFx.extend2(e,{index:e.index+r})}));this._apply(n)}},r.prototype.transfer=function(e){try{this._transferring=!0,e()}finally{this._transferring=!1}},r}(n);r.default=t})),
define("FxInternal/Controls/Grid2/Grid2.EditableGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Toolbar","FxInternal/Controls/Grid2/Grid2.EditableGrid.Addition","FxInternal/Controls/Grid2/Grid2.EditableGrid.Deletion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Editing","FxInternal/Controls/Grid2/Grid2.EditableGrid.Insertion","FxInternal/Controls/Grid2/Grid2.EditableGrid.Reordering","FxInternal/Controls/Grid2/Grid2.EditableGrid.Validation","FxInternal/Data/JoinProjection","Fx/Controls/Toolbar"],(function(e,r,n,t,o,i,a,l,s,u,d,c,f,p,v,g,h,m,w,_,x){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=void 0;var G=function(e){function r(r,n){var i=e.call(this,r,n)||this;i.controlType=125;var _=ko.observableArray();i._appendRow=null;var G=i,b=i._msPortalFxInternal,C=i.header,P=n.header||{};b.addEventTriggers("clearDirty");var R=ko.observable(!1);i.dirty=ko.computed(r,{read:function(){return R()},write:function(e){R(e),e||b.trigger.clearDirty()}});var F=MsPortalFx.initObservableArray(n.items);return t.defLocalProps(G,{items:F,rows:_}),b._allRows=ko.observableArray(),b.visibleRows=b._allRows,b.totalRowCount=ko.observable(0),b._allRowsLoaded=ko.observable(!0),t.defLocalProps(b,{additionalRows:ko.observableArray(),transferAdditionalRows:function(){i._join.transfer((function(){var e=b.additionalRows();b.additionalRows([]),e.forEach((function(e){i._appendRow=e,F.push(e.item)}))})),i._appendRow=null}}),i._plugins=[new l.Plugin(r,G,b,n),new s.Plugin(r,G,b,n),new c.Plugin(r,G,b,n,{enabledByDefault:!0}),new o.Plugin(r,G,b,n),new u.Plugin(r,G,b,n),new d.Plugin(r,G,b,n),new a.Plugin(r,G,b,n,{maxButtonCommands:n.deletion?2:void 0,supplyButtonCommands:function(e,r,n){var t=[],o=n.contextMenu.maxButtonCommands;return n.deletion&&t.length<o&&t.push(n.deletion.createDeleteRowsCommand(e,r)),t},supplyMenuCommands:function(e,r,n){var t=[];return n.deletion&&t.push(n.deletion.createDeleteRowsCommand(e,r)),n.reordering&&(t.push(n.reordering.createMoveRowsUpCommand(e,r)),t.push(n.reordering.createMoveRowsDownCommand(e,r)),t.push(n.reordering.createMoveRowsTopCommand(e,r)),t.push(n.reordering.createMoveRowsBottomCommand(e,r))),n.insertion&&t.push(n.insertion.createInsertRowCommand(e,r)),t},supplyMenuBulkCommands:function(e,r,n){var t=[];return n.deletion&&t.push(n.deletion.createDeleteRowsCommand(e,r)),n.reordering&&(t.push(n.reordering.createMoveRowsUpCommand(e,r)),t.push(n.reordering.createMoveRowsDownCommand(e,r)),t.push(n.reordering.createMoveRowsTopCommand(e,r)),t.push(n.reordering.createMoveRowsBottomCommand(e,r))),n.insertion&&t.push(n.insertion.createInsertRowCommand(e,r)),t}}),new f.Plugin(r,G,b,n,{createToolbar:function(e,r){var n=r.reordering,t=r.insertion,o=r.deletion,i=r.selection;return x.create(e,{showLabels:!0,items:[n&&n.createMoveRowsUpCommand(e,i),n&&n.createMoveRowsDownCommand(e,i),n&&n.createMoveRowsTopCommand(e,i),n&&n.createMoveRowsBottomCommand(e,i),t&&t.createInsertRowCommand(e,i),o&&o.createDeleteRowsCommand(e,i)].filter((function(e){return!!e}))})}}),new g.Plugin(r,G,b,n),new w.Plugin(r,G,b,n),new p.Plugin(r,G,b,n),new v.Plugin(r,G,b,n),new h.Plugin(r,G,b,n),new m.Plugin(r,G,b,n)],i._extendGrid(r,G,b,n),i._extendHeader(r,C,P),i._initGrid(r,G,b,n),i._initHeader(r,C,P),i}return __extends(r,e),r.prototype._initGrid=function(r,n,o,i){var a=this;e.prototype._initGrid.call(this,r,n,o,i),t.subscribeAndRun(r,this.items,(function(e){o.totalRowCount(e.length)}));var l=this.items.mapInto(r,(function(e,r){var n=a._appendRow;if(n){var i=t.internal(n);return e.registerForDispose(i._lifetime),n}var l=o._createInternalNode({item:r,id:null});return o._createRow(e,l)}),n.rows);n.rows.mapInto(r,(function(e,r){return t.internal(r)._node}),this._nodes),this.noData(!1),this._join=new _.default({lifetime:r,source:l,joinSource:o.additionalRows,destination:o._allRows})},r.prototype._createFormatter=function(e,r){return i.create(e,r)},r}(n.ViewModel);r.ViewModel=G})),
define("FxInternal/Controls/Grid2/Grid2.PagedDataGrid.Paging",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","Fx/Controls/Pager2"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=MsPortalFx.Resources.Strings,i=function(e){function r(r,n,i,a,l){var s=e.call(this,r,n,i,a)||this,u=a.paging||{};if(u){var d=u.pageLoadingMessage||o.CoreGrid.loading,c=MsPortalFx.initValue(u.pageSize,100),f=i._skip,p=i._take,v=i._totalCount;p(c);var g=t.create(r,{visible:ko.pureComputed((function(){return v()>0})),loading:n.loading,startIndex:f,pageSize:p,totalCount:v,description:u.description,rightContent:u.rightContent,onLoadPage:function(e,r,n){return Q(x(e,r)).then((function(){}))}}),h=function(e){return 1===e||e>=1&&e<=Math.ceil(v()/p())},m=function(){return g.canLoadNextPage()},w=function(){return g.canLoadPreviousPage()},_=function(e){return ko.ignoreDependencies((function(){var r=h(e);if(r){var n=p();return x(((e||1)-1)*n,n).then((function(){return r}))}return Q(r)}))},x=function(e,r){return ko.ignoreDependencies((function(){var n=function(e,r){return 0===e||e>=1&&e<v()}(e);return n?l.onLoadPage(e,r,d).then((function(){return n})):Q(n)}))},G=function(){return ko.ignoreDependencies((function(){var e=m();return e?g.loadNextPage():Q(e)}))},b=function(){return ko.ignoreDependencies((function(){var e=w();return e?g.loadPreviousPage():Q(e)}))};i.on({extendGrid:function(e,r,n,t){r.paging={canLoadNextPage:m,canLoadPage:h,canLoadPreviousPage:w,loadNextPage:G,loadPage:_,loadPreviousPage:b},n.pager=g}})}return s}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.PagedDataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.PagedDataGrid.Paging","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(e,r,n,t,o,i,a,l,s,u,d,c,f,p,v,g,h){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=void 0;var m=function(e){function r(r,n){var i=e.call(this,r,n)||this;i._lastParams=null;var m=i,w=i._msPortalFxInternal,_=i.header,x=n.header||{},G=MsPortalFx.isFeatureEnabled("enablegrid2pagedrender");w.renderMode=G?1:0,i.controlType=132;var b=ko.observableArray(),C=ko.observableArray();return t.defLocalProps(m,{rows:b,rowGroups:C}),i._dataSource=n.dataSource,i._rowMap=new Map,i._rootNodes=ko.observableArray(),i._rootRowsOrGroups=ko.observableArray(),i._previousRowMap=null,i._refreshLifetime=null,w.visibleRows=ko.observableArray(),w._allRows=ko.observableArray(),w._allRowsLoaded=ko.observable(!0),w.totalRowCount=t.computed(r,w._allRows,C,(function(e,r){return e().length+r().length})),w._skip=ko.observable(0),w._take=ko.observable(0),w._totalCount=ko.observable(0),i._plugins=[new s.Plugin(r,m,w,n),new g.Plugin(r,m,w,n,{virtualized:!0}),new o.Plugin(r,m,w,n),new p.Plugin(r,m,w,n),new v.Plugin(r,m,w,n),new a.Plugin(r,m,w,n,{}),i._sortingPlugin=new h.Plugin(r,m,w,n,{onColumnSortingStart:function(e,r){var n=w._take.peek();return i._refreshInternal({message:r,params:i._lastParams,sortOrder:e},0,n)}}),new l.Plugin(r,m,w,n),i._hierarchyPlugin=new d.Plugin(r,m,w,n),new c.Plugin(r,m,w,n),i._pagingPlugin=new f.Plugin(r,m,w,n,{onLoadPage:function(e,r,n){var t=i._sortingPlugin.getCurrentSortOrder();return i._refreshInternal({message:n,params:i._lastParams,sortOrder:t},e,r)}}),i._groupingPlugin=new u.Plugin(r,m,w,n)],i._extendGrid(r,m,w,n),i._extendHeader(r,_,x),i._initGrid(r,m,w,n),i._initHeader(r,_,x),w.on({onViewportChanged:function(e,r){}}),i}return __extends(r,e),r.prototype._initGrid=function(r,n,t,o){var i=this;e.prototype._initGrid.call(this,r,n,t,o),this._rootNodes.mapInto(r,(function(e,n){var o,a=n.id;if(!o){var l=r.createChildLifetime();o=n.isGroup?t._createRowGroup(l,n):t._createRow(l,n)}return void 0!==a&&i._rowMap.set(a,o),o}),this._rootRowsOrGroups)},r.prototype._updateRows=function(){var e=this._msPortalFxInternal,r=[],n=[],o=[],i=[],a=[],l=!0,s=!1,u=0;if(this._rootRowsOrGroups.peek().length)for(var d=void 0,c=void 0,f=void 0,p=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];p.length;){var v=p[p.length-1],g=v.level,h=v.index,m=v.rows,w=v.expanded;if(h<m.length){d=m[h],f=(c=t.internal(d))._node,n.push(f),v.index++,w&&a.push(d),1===g&&(c.isGroup?i.push(d):o.push(d)),c.isGroup||(r.push(d),2===g&&i.length&&o.push(d));var _=d.children&&d.children.peek(),x=w&&d.expanded&&d.expanded.peek();_&&_.length&&p.push({level:g+1,expanded:x,index:0,rows:_}),l&&f.getChildren&&(l=!1),(f.children||f.getChildren)&&(s=!0,g>u&&(u=g))}else p.pop()}var G=u>1||1===u&&!i.length;this._hierarchyPlugin.enableHierarchy(s,G),this._groupingPlugin.enableGrouping(!!i.length),this._nodes(n),this.noData(!n.length),e._allRows(r),e._allRowsLoaded(l),e.visibleRows(a),this.rows(o),this.rowGroups(i)},r.prototype._createFormatter=function(e,r){return i.create(e,r)},r.prototype.refresh=function(e){e=e||{};var r=this._msPortalFxInternal,n=e.sortOrder||this._sortingPlugin.getColumnSortOrder(),t=r._take.peek();return this._refreshInternal(__assign(__assign({},e),{sortOrder:n}),0,t)},r.prototype._refreshInternal=function(e,r,n){var o=this,i=e.reset,a=e.params,l=e.showMessage,s=e.sortOrder,u=this._msPortalFxInternal;this._lastParams=a,this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,i||(u.saveSelection&&u.saveSelection(null,!0),u._saveExpandedStates&&u._saveExpandedStates(this._rootRowsOrGroups.peek())),u.showLoadingUI(!1!==l)),i&&u.trigger.onReset();var d=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),c=l&&u.showLoadingUI()?Q.defer():null,f=Q(MsPortalFx.Base.Promises.cancelOnDispose(d,(function(){return c?c.promise.then((function(){return Q(o._dataSource({reset:i,sortOrder:s,params:a,skip:r,take:n}))})):Q(o._dataSource({reset:i,sortOrder:s,params:a,skip:r,take:n}))})).then((function(e){var i=[];e&&e.nodes&&t.isArray(e.nodes)&&e.nodes.forEach((function(e){if(MsPortalFx.isNullOrUndefined(e)||MsPortalFx.isNullOrUndefined(e.item)&&MsPortalFx.isNullOrUndefined(e.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");i.push(u._createInternalNode(e))}));d&&d===o._refreshLifetime&&(o._rootNodes(i),u._take(n),u._skip(r),u._totalCount(e.totalCount),o._sortingPlugin.updateSortOrder(s),u._updateRows())})).catch((function(e){throw d&&d===o._refreshLifetime&&(o._rootNodes([]),u._take(n),u._skip(r),u._totalCount(0),u._updateRows()),e})).finally((function(){d&&d.dispose(),d&&d===o._refreshLifetime&&(u.showLoadingUI(!0),!i&&o._msPortalFxInternal.restoreSelection&&o._msPortalFxInternal.restoreSelection()),o._previousRowMap&&(o._previousRowMap.forEach((function(e,r){t.internal(e)._lifetime.dispose()})),o._previousRowMap=null)}))),p=e||{};return this.displayLoadingMessage(f,{message:p.message,completedMessage:p.completedMessage,completedDataMessage:p.completedDataMessage,completedNoDataMessage:p.completedNoDataMessage}).finally((function(){c&&c.resolve()})),f.finally((function(){}))},r}(n.ViewModel);r.ViewModel=m})),
define("FxInternal/Controls/Grid2/Grid2.SequentialDataGrid.Paging",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","Fx/Controls/Button"],(function(e,r,n,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Plugin=void 0;var o=MsPortalFx.Resources.Strings,i=function(e){function r(r,n,i,a,l){var s=e.call(this,r,n,i,a)||this,u=a.paging||{};if(u){var d=u.pageLoadingMessage||o.CoreGrid.loading,c=o.SequentialDataGrid.loadAdditionalPageText,f=i._token,p=function(){var e=f();return!MsPortalFx.isNullOrUndefined(e)},v=function(){return ko.ignoreDependencies((function(){var e=p();if(e){var r=f();return Q(l.onLoadAdditionalPage(r,d)).thenResolve(!0)}return Q(e)}))},g=t.create(r,{text:c,disabled:ko.pureComputed((function(){return n.disabled()||n.loading()||!p()})),visible:ko.pureComputed((function(){return p()})),onClick:function(){v()}});i.on({extendGrid:function(e,r,n,t){r.paging={canLoadAdditionalPage:p,loadAdditionalPage:v},n.loadAdditionalPageButton=g}})}return s}return __extends(r,e),r}(n.Plugin);r.Plugin=i})),
define("FxInternal/Controls/Grid2/Grid2.SequentialDataGrid",["require","exports","FxInternal/Controls/Grid2/Grid2.CoreGrid.Base","FxInternal/Controls/Grid2/Grid2.CoreGrid.Util","FxInternal/Controls/Grid2/Grid2.CoreGrid.Activation","FxInternal/Controls/Grid2/Grid2.CoreGrid.Formatters","FxInternal/Controls/Grid2/Grid2.CoreGrid.ContextMenu","FxInternal/Controls/Grid2/Grid2.CoreGrid.Filtering","FxInternal/Controls/Grid2/Grid2.CoreGrid.Focus","FxInternal/Controls/Grid2/Grid2.CoreGrid.Grouping","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hierarchy","FxInternal/Controls/Grid2/Grid2.CoreGrid.Hover","FxInternal/Controls/Grid2/Grid2.SequentialDataGrid.Paging","FxInternal/Controls/Grid2/Grid2.CoreGrid.Resizing","FxInternal/Controls/Grid2/Grid2.CoreGrid.Scrolling","FxInternal/Controls/Grid2/Grid2.CoreGrid.Selection","FxInternal/Controls/Grid2/Grid2.CoreGrid.Sorting"],(function(e,r,n,t,o,i,a,l,s,u,d,c,f,p,v,g,h){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ViewModel=void 0;var m=function(e){function r(r,n){var i=e.call(this,r,n)||this;i._lastParams=null;var m=i,w=i._msPortalFxInternal,_=i.header,x=n.header||{};i.controlType=133;var G=ko.observableArray(),b=ko.observableArray();return t.defLocalProps(m,{rows:G,rowGroups:b}),w._token=ko.observable(null),i._dataSource=n.dataSource,i._rowMap=new Map,i._rootNodes=ko.observableArray(),i._rootRowsOrGroups=ko.observableArray(),i._previousRowMap=null,i._refreshLifetime=null,w.visibleRows=ko.observableArray(),w._allRows=ko.observableArray(),w._allRowsLoaded=ko.observable(!0),w.totalRowCount=t.computed(r,w._allRows,b,(function(e,r){return e().length+r().length})),i._plugins=[new s.Plugin(r,m,w,n),new g.Plugin(r,m,w,n,{virtualized:!0}),new o.Plugin(r,m,w,n),new p.Plugin(r,m,w,n),new v.Plugin(r,m,w,n),new a.Plugin(r,m,w,n,{}),i._sortingPlugin=new h.Plugin(r,m,w,n,{onColumnSortingStart:function(e,r){return w._token(null),i._refreshInternal({message:r,params:i._lastParams,sortOrder:e},w._token())}}),new l.Plugin(r,m,w,n),i._hierarchyPlugin=new d.Plugin(r,m,w,n),new c.Plugin(r,m,w,n),i._pagingPlugin=new f.Plugin(r,m,w,n,{onLoadAdditionalPage:function(e,r){var n=i._sortingPlugin.getCurrentSortOrder();return i._refreshInternal({message:r,params:i._lastParams,sortOrder:n},w._token())}}),i._groupingPlugin=new u.Plugin(r,m,w,n)],i._extendGrid(r,m,w,n),i._extendHeader(r,_,x),i._initGrid(r,m,w,n),i._initHeader(r,_,x),i}return __extends(r,e),r.prototype._initGrid=function(r,n,t,o){var i=this;e.prototype._initGrid.call(this,r,n,t,o),this._rootNodes.mapInto(r,(function(e,n){var o,a=n.id;if(!o){var l=r.createChildLifetime();o=n.isGroup?t._createRowGroup(l,n):t._createRow(l,n)}return void 0!==a&&i._rowMap.set(a,o),o}),this._rootRowsOrGroups)},r.prototype._updateRows=function(){var e=this._msPortalFxInternal,r=[],n=[],o=[],i=[],a=[],l=!0,s=!1,u=0;if(this._rootRowsOrGroups.peek().length)for(var d=void 0,c=void 0,f=void 0,p=[{level:1,expanded:!0,index:0,rows:this._rootRowsOrGroups.peek()}];p.length;){var v=p[p.length-1],g=v.level,h=v.index,m=v.rows,w=v.expanded;if(h<m.length){d=m[h],f=(c=t.internal(d))._node,n.push(f),v.index++,w&&a.push(d),1===g&&(c.isGroup?i.push(d):o.push(d)),c.isGroup||(r.push(d),2===g&&i.length&&o.push(d));var _=d.children&&d.children.peek(),x=w&&d.expanded&&d.expanded.peek();_&&_.length&&p.push({level:g+1,expanded:x,index:0,rows:_}),l&&f.getChildren&&(l=!1),(f.children||f.getChildren)&&(s=!0,g>u&&(u=g))}else p.pop()}var G=u>1||1===u&&!i.length;this._hierarchyPlugin.enableHierarchy(s,G),this._groupingPlugin.enableGrouping(!!i.length),this._nodes(n),this.noData(!n.length),e._allRows(r),e._allRowsLoaded(l),e.visibleRows(a),this.rows(o),this.rowGroups(i)},r.prototype._createFormatter=function(e,r){return i.create(e,r)},r.prototype.refresh=function(e){e=e||{};var r=this._msPortalFxInternal,n=(e=__assign(__assign({},e),{reset:!0})).sortOrder||this._sortingPlugin.getColumnSortOrder();return r._token(null),this._refreshInternal(__assign(__assign({},e),{sortOrder:n}),r._token)},r.prototype._refreshInternal=function(e,r){var n=this,o=e.reset,i=e.params,a=e.showMessage,l=e.sortOrder,s=this._msPortalFxInternal;this._lastParams=i,this._refreshLifetime&&!this._refreshLifetime.isDisposed()?this._refreshLifetime.dispose():(this._previousRowMap=this._rowMap,this._rowMap=new Map,o||(s.saveSelection&&s.saveSelection(null,!0),s._saveExpandedStates&&s._saveExpandedStates(this._rootRowsOrGroups.peek())),s.showLoadingUI(!1!==a)),o&&(s._token(null),s.trigger.onReset());var u=this._refreshLifetime=this.lifetimeManager&&this.lifetimeManager.createChildLifetime(),d=a&&s.showLoadingUI()?Q.defer():null,c=Q(MsPortalFx.Base.Promises.cancelOnDispose(u,(function(){return d?d.promise.then((function(){return Q(n._dataSource({reset:o,sortOrder:l,params:i,token:s._token()}))})):Q(n._dataSource({reset:o,sortOrder:l,params:i,token:s._token()}))})).then((function(e){var r,o=[];e&&e.nodes&&t.isArray(e.nodes)&&e.nodes.forEach((function(e){if(MsPortalFx.isNullOrUndefined(e)||MsPortalFx.isNullOrUndefined(e.item)&&MsPortalFx.isNullOrUndefined(e.group))throw new MsPortalFx.Errors.Error("dataSource returned node without item or group");o.push(s._createInternalNode(e))}));u&&u===n._refreshLifetime&&(MsPortalFx.isNullOrUndefined(s._token())?n._rootNodes(o):(r=n._rootNodes).push.apply(r,o),s._token(e.token),n._sortingPlugin.updateSortOrder(l),s._updateRows())})).catch((function(e){throw u&&u===n._refreshLifetime&&(n._rootNodes([]),s._updateRows()),e})).finally((function(){u&&u.dispose(),u&&u===n._refreshLifetime&&(s.showLoadingUI(!0),!o&&n._msPortalFxInternal.restoreSelection&&n._msPortalFxInternal.restoreSelection()),n._previousRowMap&&(n._previousRowMap.forEach((function(e,r){t.internal(e)._lifetime.dispose()})),n._previousRowMap=null)}))),f=e||{};return this.displayLoadingMessage(c,{message:f.message,completedMessage:f.completedMessage,completedDataMessage:f.completedDataMessage,completedNoDataMessage:f.completedNoDataMessage}).finally((function(){d&&d.resolve()})),c.finally((function(){}))},r}(n.ViewModel);r.ViewModel=m}));